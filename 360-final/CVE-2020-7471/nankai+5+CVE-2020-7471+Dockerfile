FROM python:3.8

WORKDIR /app

COPY . /app

RUN pip install django==3.0.2

RUN django-admin startproject demo .
RUN python manage.py startapp vulnerable_app

COPY vulnerable_app /app/demo/vulnerable_app

COPY demo/settings.py /app/demo/settings.py

RUN service postgresql start && \
    python manage.py migrate && \
    python manage.py createsuperuser --username=admin --email=admin@example.com

EXPOSE 8000

CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]